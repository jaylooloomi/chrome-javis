# Chrome Jarvis å•é¡Œåˆ†æèˆ‡è§£æ±ºæ–¹æ¡ˆ

## ğŸ” ç™¼ç¾çš„å•é¡Œ

### 1. Gemini Nano API å…¼å®¹æ€§å•é¡Œ
- **ä½ç½®**ï¼š`service-worker.js:127`
- **å•é¡Œ**ï¼šéœ€è¦ Chrome 127+ ç‰ˆæœ¬å’Œå¯¦é©—æ€§åŠŸèƒ½å•Ÿç”¨
- **å½±éŸ¿**ï¼šä¸»è¦ AI å¼•æ“å¯èƒ½ç„¡æ³•ä½¿ç”¨

### 2. Ollama æœå‹™ä¾è³´
- **ä½ç½®**ï¼š`service-worker.js:142`
- **å•é¡Œ**ï¼šå®Œå…¨ä¾è³´æœ¬åœ° Ollama æœå‹™
- **å½±éŸ¿**ï¼šæœå‹™æœªé‹è¡Œæ™‚åŠŸèƒ½å¤±æ•ˆ

### 3. éŒ¯èª¤è™•ç†ä¸å®Œå–„
- **ä½ç½®**ï¼šå¤šå€‹ `catch` å¡Š
- **å•é¡Œ**ï¼šéŒ¯èª¤è¢«å¿½ç•¥ï¼Œç”¨æˆ¶ç„¡æ³•å¾—çŸ¥å•é¡Œ
- **å½±éŸ¿**ï¼šç”¨æˆ¶é«”é©—å·®ï¼Œé›£ä»¥èª¿è©¦

### 4. æŠ€èƒ½è¼‰å…¥å¤±æ•—è™•ç†
- **ä½ç½®**ï¼š`service-worker.js:45`
- **å•é¡Œ**ï¼šæŠ€èƒ½ MD æª”æ¡ˆè®€å–å¤±æ•—æ™‚æ²’æœ‰å‚™ç”¨æ–¹æ¡ˆ
- **å½±éŸ¿**ï¼šéƒ¨åˆ†åŠŸèƒ½å¯èƒ½ç„¡æ³•ä½¿ç”¨

## ğŸ› ï¸ è§£æ±ºæ–¹æ¡ˆ

### æ–¹æ¡ˆ 1ï¼šæ”¹é€²éŒ¯èª¤è™•ç†
```javascript
// åœ¨ service-worker.js ä¸­æ·»åŠ 
function showUserError(message) {
    chrome.runtime.sendMessage({
        action: "show_error",
        message: message
    }).catch(() => {
        // å¦‚æœå´é‚Šæ¬„æœªé–‹å•Ÿï¼Œè¨˜éŒ„åˆ°æ§åˆ¶å°
        console.error("User Error:", message);
    });
}
```

### æ–¹æ¡ˆ 2ï¼šæ·»åŠ æœå‹™å¥åº·æª¢æŸ¥
```javascript
async function checkOllamaHealth() {
    try {
        const response = await fetch("http://localhost:11434/api/tags", {
            method: "GET",
            timeout: 5000
        });
        return response.ok;
    } catch (e) {
        return false;
    }
}
```

### æ–¹æ¡ˆ 3ï¼šæ”¹é€²æŠ€èƒ½è¼‰å…¥
```javascript
async function loadSkillsWithFallback() {
    // ä¸»è¦è¼‰å…¥é‚è¼¯
    try {
        await loadSkills();
    } catch (e) {
        // ä½¿ç”¨å…§å»ºæŠ€èƒ½æè¿°ä½œç‚ºå‚™ç”¨
        console.warn("ä½¿ç”¨å‚™ç”¨æŠ€èƒ½æè¿°");
        dynamicSystemPrompt = getBuiltinSkillsPrompt();
    }
}
```

## ğŸš€ éƒ¨ç½²å»ºè­°

1. **æ¸¬è©¦ç’°å¢ƒ**ï¼šåœ¨ Chrome 127+ ç‰ˆæœ¬ä¸­æ¸¬è©¦
2. **Ollama æœå‹™**ï¼šç¢ºä¿æœ¬åœ° Ollama æœå‹™æ­£å¸¸é‹è¡Œ
3. **éŒ¯èª¤ç›£æ§**ï¼šæ·»åŠ æ›´è©³ç´°çš„æ—¥èªŒè¨˜éŒ„
4. **ç”¨æˆ¶å¼•å°**ï¼šæ·»åŠ æœå‹™ç‹€æ…‹æŒ‡ç¤ºå™¨

## ğŸ“‹ å¾…è¾¦äº‹é …

- [ ] å¯¦æ–½æ”¹é€²çš„éŒ¯èª¤è™•ç†
- [ ] æ·»åŠ æœå‹™å¥åº·æª¢æŸ¥
- [ ] å‰µå»ºç”¨æˆ¶å‹å¥½çš„éŒ¯èª¤è¨Šæ¯
- [ ] æ·»åŠ æŠ€èƒ½è¼‰å…¥é‡è©¦æ©Ÿåˆ¶
- [ ] æ¸¬è©¦åœ¨ä¸åŒ Chrome ç‰ˆæœ¬ä¸­çš„å…¼å®¹æ€§