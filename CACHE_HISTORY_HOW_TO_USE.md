# 🎉 缓存历史功能使用说明

## 快速访问

### 步骤 1: 获取你的扩展 ID
1. 打开 Chrome：**`chrome://extensions/`**
2. 开启 **"开发者模式"**（右上角）
3. 找到 "**OmniAssistant**"
4. 复制扩展 ID（例：`abcdefghijklmnopqrstuvwxyz...`）

### 步骤 2: 打开缓存历史页面
在 Chrome 地址栏粘贴：
```
chrome-extension://YOUR_EXTENSION_ID/cache-history.html
```

替换 `YOUR_EXTENSION_ID` 为你的实际扩展 ID

### 步骤 3: 开始使用
- 📊 查看缓存统计卡片（上方）
- 📋 浏览最近 10 条缓存记录（中间）
- 🔄 点击"刷新数据"更新
- 🗑️ 点击"清空缓存"删除所有记录

---

## 页面功能

### 📊 统计卡片
```
┌──────────┬──────────┬──────────┐
│ 总缓存数 │ 最近记录 │ 最大容量 │
│    42    │    10    │    10    │
└──────────┴──────────┴──────────┘
```
- **总缓存数**: 所有保存的 AI 推理结果
- **最近记录**: 最近使用列表中的项数
- **最大容量**: 列表容量限制 (固定 10)

### 📋 缓存列表
每条记录显示：
- **用户输入** - 你提出的问题
- **技能** - 识别出的执行技能
- **参数** - 执行时的参数
- **时间** - 相对时间 (如 "2 分钟前")

### 🔄 控制按钮
- **刷新数据** - 获取最新缓存统计
- **清空缓存** - 删除所有缓存（需确认）

---

## 示例场景

### 场景 1: 查看最近使用
1. 打开缓存历史页面
2. 查看"最近记录"统计卡片
3. 浏览缓存列表中的最新 5 项
4. 了解你最常用的功能

### 场景 2: 查找之前的查询
1. 刷新页面获取最新数据
2. 查看用户输入列表
3. 找到相似的历史查询
4. 查看对应的执行参数

### 场景 3: 清理缓存
1. 点击"清空缓存"按钮
2. 确认删除操作
3. 缓存列表变为空
4. 统计数字重置为 0

---

## 常见问题

**Q: 页面打不开？**  
A: 检查扩展 ID 是否正确，确认 Service Worker 运行正常（chrome://extensions）

**Q: 缓存显示为 0？**  
A: 首次访问正常，使用 AI 功能后会增加

**Q: 能否导出缓存？**  
A: 当前版本不支持，计划在后续更新中添加

**Q: 缓存会持久化吗？**  
A: 当前只在当前会话中保存，刷新页面后清空

---

## 文档指南

根据需求选择不同文档：

| 文档 | 适合人群 | 内容 |
|------|--------|------|
| [快速参考卡](CACHE_HISTORY_REFERENCE.md) | 快速查找 | 常用命令、快捷操作 |
| [快速开始](CACHE_HISTORY_QUICKSTART.md) | 初学者 | 基础操作、问题解决 |
| [使用指南](CACHE_HISTORY_USAGE.md) | 深入了解 | API、功能、扩展 |
| [完整总结](CACHE_HISTORY_COMPLETE_SUMMARY.md) | 开发者 | 技术架构、设计详情 |
| [完成报告](CACHE_HISTORY_COMPLETION_REPORT.md) | 项目回顾 | 成就、学到的东西 |
| [实现清单](IMPLEMENTATION_CHECKLIST.md) | 质量评估 | 完成度、指标数据 |

---

## 技术细节

### 消息通信
缓存历史页面通过 Chrome 消息 API 与 Service Worker 通信：
```javascript
// 查询缓存统计
chrome.runtime.sendMessage({ action: 'get_cache_stats' })

// 清空缓存
chrome.runtime.sendMessage({ action: 'clear_cache' })
```

### 时间格式
自动转换时间戳为相对时间：
- 刚刚 (< 1 秒)
- 30 秒前 (1-60 秒)
- 5 分钟前 (1-60 分钟)
- 3 小时前 (1-24 小时)
- 2 天前 (≥ 1 天)

### 数据安全
- ✅ HTML 转义防止 XSS
- ✅ 输入验证
- ✅ 错误隐藏
- ✅ 权限最小化

---

## 隐私说明

- 缓存仅在浏览器本地保存
- 不上传到任何服务器
- 不与第三方分享
- 可随时清空
- 完全用户控制

---

## 反馈和改进

如有建议或问题，欢迎在 GitHub issues 中反馈：
- 功能建议
- 问题报告
- 使用体验
- 文档改进

---

## 版本信息

- **版本**: 1.0 (完整版)
- **发布日期**: 2024-02-27
- **状态**: ✅ 稳定可用
- **Chrome 最低版本**: 127

---

## 下一步

后续计划：
- 🔄 跨会话缓存持久化
- 🔍 搜索和过滤功能
- 📊 统计分析图表
- 💾 导出/导入功能
- ⚫ 暗色主题支持

敬请期待！

---

**最后更新**: 2024-02-27  
**维护者**: OmniAssistant Team  
**状态**: ✅ 已就绪

**现在就打开缓存历史页面，开始探索吧！** 🚀
